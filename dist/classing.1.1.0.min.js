/** Classing{js} v1.1.0 | (c) 2014 Mostafa Samir | MIT License **/
var classing={};var _global=typeof window!="undefined"&&this===window?window:global;classing._instantiateOnce=function(){var e=false;return function(){var t=1010;if(e){throw classing.xError("000","not allowed")}else{e=true;Object.defineProperty(this,"timestamp",{get:function(){return t},set:function n(e){var r=n.caller;if(r===classing.Class||r===classing.Interface||r===classing.xStamp){t=e}}})}}}();Object.defineProperty(classing,"xTyped",{value:true,writable:false});Object.defineProperty(classing,"xNonTyped",{value:false,writable:false});Object.defineProperty(classing,"xSelf",{value:new classing._instantiateOnce,writable:false});Object.defineProperty(classing,"base",{value:null,writable:true});Object.defineProperty(_global,"xTyped",{get:function(){return classing.xTyped},set:function(e){}});Object.defineProperty(_global,"xNonTyped",{get:function(){return classing.xNonTyped},set:function(e){}});Object.defineProperty(_global,"xSelf",{get:function(){return classing.xSelf},set:function(e){}});Object.defineProperty(_global,"base",{get:function(){return classing.base},set:function(e){}});classing.xError=function(e,t){var n=new Error;n.name="xError";n.code=parseInt(e);n.message="[code="+n.code+"]:"+t;return n};Object.defineProperty(Object.prototype,"instanceOf",{value:function(e){var t=false;if(typeof e!=="object"){t=this instanceof e}if(!t){if(e.timestamp){var n=this.constructor;while(n!=="_root_"){if(n._metadata._implements[""+e.timestamp]){t=true;break}else if(n._metadata._extends===e){t=true;break}else{n=n._metadata._extends}}}}return t},enumerable:false});classing.xStamp=function(e){if(typeof e==="function"){e.timestamp=classing.xSelf.timestamp;classing.xSelf.timestamp++}};classing._xTypes=function(e,t){if(classing._xTypes.caller===classing.types){this.count=e;this.list=t}else{throw classing.xError("000","Not Allowed")}};classing.types=function(){var e=arguments.length;var t="";for(var n=0;n<e;n++){if(arguments[n]===classing.xSelf){t+=classing.xSelf.timestamp;continue}if(typeof arguments[n]!=="function"){throw classing.xError("103","Invalid Type")}if(arguments[n].timestamp){t+=arguments[n].timestamp}else{var r=arguments[n].toString();var i=r.match(/function\s*(\w+)/)[1];t+=i}if(n!==arguments.length-1){t+=","}}var s=new classing._xTypes(e,t);return s};Object.defineProperty(_global,"types",{get:function(){return classing.types},set:function(e){}});Function.create=function(){function e(e,t){if(e){for(i in t){for(j in t[i]){if(!classing.Abstract.isNotImplemented(t[i][j])){return false}}}}else{for(i in t){if(!classing.Abstract.isNotImplemented(t[i])){return false}}}return true}function t(e){var t=typeof e;if(t==="object"){if(e.constructor.timestamp){return e.constructor.timestamp.toString()}else{var n=Object.getPrototypeOf(e).constructor.toString();var r=n.match(/function\s*(\w*)/)[1];if(r!==""){return r}else{return"Object"}}}t=t[0].toUpperCase()+t.substring(1);return t}return function(n,r,i){if(n===undefined||!r||i){throw classing.xError("100","invalid arguments")}else if(typeof n!=="boolean"||!(r instanceof Array)){throw classing.xError("100","invalid arguments")}else{var s=r.length;var o={isTyped:false};var u;if(n){o.isTyped=true;o.types=[];var a=[];if(s===0||s%2!==0){throw classing.xError("101","inavalid array format")}else{for(var f=0;f<s;f=f+2){var l,c;if(!(r[f]instanceof classing._xTypes)||typeof r[f+1]!=="function"){throw classing.xError("101","inavalid array format")}else{if(r[f+1].length!==r[f].count){throw classing.xError("102","arguments number mismatch")}r[f+1].types=r[f].list;a.push(r[f+1])}}a.sort(function(e,t){return t.length-e.length});var h=a[0].length;var p=new Array(h+1);for(var f=0;f<=h;f++){p[f]={}}for(var f=0;f<s/2;f++){var d=a[f];o.types.push(d.types);if(p[d.length][d.types]!==undefined){throw classing.xError("106","duplicate arguments list found")}p[d.length][d.types]=d}u=function(){var e=h;var n=p;var r=[];var i=arguments.length;var s=0;while(s<i){r.push(arguments[s]);s++}var o="";for(var u=0;u<i;u++){o+=t(r[u]);if(u!==i-1){o+=","}}if(i>e){throw classing.xError("105","no overloaded instance of the function matches the argument list")}var a=n[i][o];if(!a){throw classing.xError("105","no overloaded instance of the function matches the argument list")}else{return a.apply(this,r)}};u._meta_=o;Object.defineProperty(u,"isEmpty",{get:function(){return e(true,p)},set:function(e){}})}}else{o.counts=new Array;if(s===0){throw classing.xError("101","inavlid array format")}else{for(var f=0;f<s;f++){if(typeof r[f]!=="function"){throw classing.xError("101","inavlid array format")}}r.sort(function(e,t){return t.length-e.length});var h=r[0].length;var p=[];for(var f=0;f<s;f++){var v=r[f].length;if(p[v]!==undefined){throw classing.xError("106","duplicate arguments list found")}p[v]=r[f];o.counts.push(v)}u=function(){var e=h;var t=p;var n=[];var r=arguments.length;var i=0;while(i<r){n.push(arguments[i]);i++}if(r>e){throw classing.xError("105","no overloaded instance of the function matches the argument list");return}var s=t[r];if(!s){throw classing.xError("105","no overloaded instance of the function matches the argument list");return}else{return s.apply(this,n)}};u._meta_=o;Object.defineProperty(u,"isEmpty",{get:function(){return e(false,p)},set:function(e){}})}}return u}}}();classing.Interface=function(e){var t={};var n=classing.xSelf.timestamp;classing.xSelf.timestamp++;for(key in e){var r=e[key];if(typeof r!=="function"){throw classing.xError("401","Interfaces contain only methods")}else{if(r.isEmpty!==undefined){if(!r.isEmpty){throw classing.xError("402","an interface method cannot have any implementation")}else{r._meta_.isOverloaded=true;t[key]={accessLevel:"public",description:r._meta_}}}else{if(!classing.Abstract.isNotImplemented(r)){throw classing.xError("402","an interface method cannot have any implementation")}else{t[key]={accessLevel:"public",description:{isOverloaded:false,argsCount:r.length}}}}}}var i=new Object;Object.defineProperty(i,"components",{value:t,writable:false});Object.defineProperty(i,"isInterface",{value:true,writable:false});Object.defineProperty(i,"timestamp",{value:n,writable:false});return i};classing.xAreCompatiable=function(e,t,n){if(e.accessLevel===n){if(e.description.isOverloaded){if(t._meta_){if(e.description.isTyped===t._meta_.isTyped){if(e.description.isTyped){var r=e.description.types.length;var i=0;var s=t._meta_.types;var o=s.length;for(var u=0;u<o;u++){var a=-1;for(var f=0;f<r;f++){if(e.description.types[f]===s[u]){a=f;break}}if(a===-1){return false}else{i++}}if(i===r){return true}}else{var r=e.description.counts.length;var i=0;var l=t._meta_.counts;for(var u=0;u<l.length;u++){var a=-1;for(var f=0;f<r;f++){if(e.description.counts[f]===l[u]){a=f;break}}if(a===-1){return false}else{i++}}if(i===r){return true}}}}}else{if(e.description.argsCount===t.length){return true}}}return false};classing.Class=function(){function e(e,t,n){if(e===0){if(t.hasOwnProperty("_hu_")){return t._hu_}else{return t}}else if(e===2){if(t.hasOwnProperty("_eu_")){return t._eu_}else{return t}}else{var r=new Object;t.apply(r,n);return r}}function t(t,n,r,i){if(n==="method"){t[r]=function(){var n=[];var s=arguments.length;var o=0;while(o<s){n.push(arguments[o]);if(n[o].constructor.timestamp===t.constructor.timestamp){n[o]=e(0,n[o])}o++}classing.base=t._super;return i[r].apply(t,n);classing.base=null}}else if(n==="property"){Object.defineProperty(t,r,{get:function(){classing.base=t._super;return i[r].get.apply(t,[]);classing.base=null},set:function(n){if(n.constructor.timestamp===t.constructor.timestamp){n=e(0,n)}classing.base=t._super;return i[r].set.apply(t,[n]);classing.base=null},enumerable:true})}else if(n==="protected-static"){if(typeof i.loc[r]==="object"&&i.loc[r].___xisProperty){Object.defineProperty(t,r,{get:function s(){var e=s.caller;if(i.own[e.privliagedMark]||i.childs[e.privliagedMark]||e.caller._meta_&&(i.own[e.caller.privliagedMark]||i.childs[e.caller.privliagedMark])){return i.loc[r].referTo[r]}else{throw classing.xError("213","inaccessable member")}},set:function o(e){var t=o.caller;if(i.own[t.privliagedMark]||i.childs[t.privliagedMark]||t.caller._meta_&&(i.own[t.caller.privliagedMark]||i.childs[t.caller.privliagedMark])){i.loc[r].referTo[r]=e}else{throw classing.xError("213","inaccessable member")}},enumerable:true})}else{Object.defineProperty(t,r,{get:function u(){var e=u.caller;if(i.own[e.privliagedMark]||i.childs[e.privliagedMark]||e.caller._meta_&&(i.own[e.caller.privliagedMark]||i.childs[e.caller.privliagedMark])){return i.loc[r].value}else{throw classing.xError("213","inaccessable member")}},set:function a(e){var t=a.caller;if(i.own[t.privliagedMark]||i.childs[t.privliagedMark]||t.caller._meta_&&(i.own[t.caller.privliagedMark]||i.childs[t.caller.privliagedMark])){i.loc[r].value=e}else{throw classing.xError("213","inaccessable member")}},enumerable:true})}}else if(n==="private-static"){if(typeof i.loc[r]==="object"&&i.loc[r].___xisProperty){Object.defineProperty(t,r,{get:function f(){var e=f.caller;if(i.own[e.privliagedMark]||e.caller._meta_&&i.own[e.caller.privliagedMark]!==-1){return i.loc[r].referTo[r]}else{throw classing.xError("213","inaccessable member")}},set:function l(e){var t=l.caller;if(i.own[t.privliagedMark]||t.caller._meta_&&i.own[t.caller.privliagedMark]!==-1){i.loc[r].referTo[r]=e}else{throw classing.xError("213","inaccessable member")}},enumerable:true})}else{Object.defineProperty(t,r,{get:function c(){var e=c.caller;if(i.own[e.privliagedMark]||e.caller._meta_&&i.own[e.caller.privliagedMark]!==-1){return i.loc[r].value}else{throw classing.xError("213","inaccessable member")}},set:function h(e){var t=h.caller;if(i.own[t.privliagedMark]||t.caller._meta_&&i.own[t.caller.privliagedMark]!==-1){i.loc[r].value=e}else{throw classing.xError("213","inaccessable member")}},enumerable:true})}}else if(n==="public-static"){if(typeof i.loc[r]==="object"&&i.loc[r].___xisProperty){Object.defineProperty(t,r,{get:function(){return i.loc[r].referTo[r]},set:function(e){i.loc[r].referTo[r]=e},enumerable:true})}else{t[r]=i.loc[r].value}}else if(n==="inherited"){Object.defineProperty(t,r,{get:function(){return t._super[r]},set:function(e){t._super[r]=e},enumerable:true})}else if(n==="link"){Object.defineProperty(t,r,{get:function(){return i[r]},set:function(e){i[r]=e},enumerable:true})}else if(n==="_eu_"){Object.defineProperty(t,r,{get:function(){return i[r]},set:function(e){i[r]=e},enumerable:true})}}var n={_metadata:{methods:{},proprties:{},attributes:{},abstracts:{}}};return function(r){var i=classing.xSelf.timestamp;classing.xSelf.timestamp++;if(typeof r!=="object"){throw classing.xError("201","Invalid Definition")}return function(){var s=0;var o={isAbstract:classing.Class.options.isAbstract,isFinal:classing.Class.options.isFinal,parent:classing.Class.options.parent===null?n:classing.Class.options.parent,interfaces:classing.Class.options.interfaces,timestamp:i,constructorAccessLevel:"public"};classing.Class.options.parent=null;classing.Class.options.interfaces=null;classing.Class.options.isExtending=false;classing.Class.options.isImplementing=false;classing.Class.options.isAbstract=false;classing.Class.options.isFinal=false;var u={};var a={};var f={};var l={};var c={};var h={methods:{},proprties:{},attributes:{},abstracts:null,constructorAccessLevel:"public",_implements:{},_extends:o.parent===n?"_root_":o.parent};var p={};var d={};var v=function(){};if(o.interfaces!==null){var m=o.interfaces.length;for(var g=0;g<m;g++){var y=o.interfaces[g];h._implements[""+y.timestamp]=true;for(record in y.components){c[record]=y.components[record]}}}o.interfaces=undefined;if(o.parent._metadata.abstracts){for(record in o.parent._metadata.abstracts){c[record]=o.parent._metadata.abstracts[record]}}for(modifier in r){if(typeof r[modifier]!=="object"){throw classing.xError("201","Invalid definition")}if(modifier!=="public"&&modifier!=="private"&&modifier!=="protected"){throw classing.xError("202",modifier+": undefined access modifier")}var b=r[modifier];for(key in b){if(d[key]){throw classing.xError("207","class cannot have two components with the same name")}if(typeof b[key]==="function"){if(key==="Construct"){if(b[key].isAbstract){throw classing.xError("214","a constructor cannot be abstract")}o.constructorAccessLevel=modifier;h.constructorAccessLevel=modifier;v=b[key];b[key].privliagedMark=i+":"+s;u[i+":"+s]=true;s++;continue}else if(o.parent._metadata.methods[key]){if(b[key].isAbstract){throw classing.xError("215","an abstract method cannot override a concrete one")}if(o.parent._metadata.methods[key].accessLevel!==modifier){throw classing.xError("216","overriding a method in a different access level is not allowed")}if(o.parent._metadata.methods[key].isFinal){throw classing.xError("204","Cannot override a final method")}}else if(c[key]){if(classing.xAreCompatiable(c[key],b[key],modifier)){c[key]=undefined}else{throw classing.xError("205","on function "+key+": mismatch between implementation and abstract decleration")}}if(b[key].isAbstract){if(modifier==="private"){throw classing.xError("203","marking a private method as abstract is not allowed")}l[key]={accessLevel:modifier,description:b[key]._meta_};b[key]=undefined}else{b[key].privliagedMark=i+":"+s;u[i+":"+s]=true;s++;d[key]=true;if(modifier!=="private"){h.methods[key]={isFinal:b[key].isFinal,accessLevel:modifier}}}}else if(typeof b[key]==="object"){if(b[key]!==null&&b[key].isStatic){if(typeof b[key].value==="function"){b[key].value.privliagedMark=i+":"+s;u[i+":"+s]=true;s++}else if(typeof b[key].value==="object"){var w=2;for(prop in b[key].value){if((prop==="get"||prop=="set")&&typeof b[key].value[prop]==="function"){w--}else{break}}if(w===0){b[key].value.get.privliagedMark=i+":"+s;u[i+":"+s]=true;s++;b[key].value.set.privliagedMark=i+":"+s;u[i+":"+s]=true;s++;Object.defineProperty(p,key,{get:b[key].value.get,set:b[key].value.set});b[key]={___xisProperty:true,isStatic:true,referTo:p}}}f[key]={accessLevel:modifier};d[key]=true}else{if(b[key]!==null){var E=2;for(prop in b[key]){if((prop==="get"||prop=="set")&&typeof b[key][prop]==="function"){E--}else{break}}if(E===0){b[key].get.privliagedMark=i+":"+s;u[i+":"+s]=true;s++;b[key].set.privliagedMark=i+":"+s;u[i+":"+s]=true;s++;b[key].isProperty=true;d[key]=true;if(modifier!=="private"){h.proprties[key]={accessLevel:modifier}}}else{throw classing.xError("206","setting a non-static attribute to an object is not allowed")}}else{d[key]=true;if(modifier!=="private"){h.proprties[key]={accessLevel:modifier}}}}}else{d[key]=true;if(modifier!=="private"){h.proprties[key]={accessLevel:modifier}}}}}for(record in c){if(c[record]!==undefined){l[record]=c[record]}}h.abstracts=l;var m=Object.keys(l).length;if(m==0&&o.isAbstract){throw classing.xError("208","an abstrcat class must contain at least one abstract method")}if(m>0&&!o.isAbstract){throw classing.xError("209","an abstract method must be contained in an abstract class")}c=undefined;d=undefined;var S=function(){var r=this;var i=[];var s=arguments.length;var u=0;while(u<s){i.push(arguments[u]);if(i[u].constructor.timestamp===o.timestamp){i[u]=e(0,i[u])}u++}classing.base=function(){if(o.parent!==n){if(o.parent.isAbstract){r._super=e(1,o.parent,arguments)}else{r._super={};o.parent.apply(r._super,arguments)}}else{r._super=new Object}};classing.base.isBase=true;v.apply(r,i);if(r._super===null){if(o.parent===n){r._super=new Object}else{try{if(o.parent.isAbstract||o.parent._metadata.constructorAccessLevel==="protected"){r._super=e(1,o.parent,[])}else{r._super=new o.parent}}catch(a){if(a.code!==212){throw classing.xError("210","parent class doesn't contain a default constructor")}throw a}}}r._super=e(2,r._super);for(key in r._super){if(!r[key]){t(r,"inherited",key)}}};var x=function(){var n=x.caller;var i=!n.isBase?n.privliagedMark?n.privliagedMark:"":n.caller.privliagedMark;if(o.constructorAccessLevel!=="public"&&n!==e&&!u[i]&&!(a[i]&&o.constructorAccessLevel==="protected")){throw classing.xError("212","inaccessable constructor")}if(o.isAbstract&&x.caller!==e){throw classing.xError("211","Cannot instantiate an abstract class")}else{var s={};var f={};f["publics"]={};var l=this;s["_super"]=null;s.constructor=x;for(modifier in r){var c=r[modifier];for(key in c){var h=false;if(c[key]!==null){if(c[key]!==undefined&&!c[key].isStatic&&key!="Construct"){h=true;if(typeof c[key]==="function"){t(s,"method",key,r[modifier])}else if(c[key].isProperty){t(s,"property",key,r[modifier])}else{s[key]=r[modifier][key]}}if(modifier==="public"||modifier==="protected"){t(f,"_eu_",key,s);if(modifier==="public"){f.publics[key]=true}}}else{h=true;s[key]=null;if(modifier==="public"||modifier==="protected"){t(f,"_eu_",key,s);if(modifier==="public"){f.publics[key]=true}}}if(modifier==="public"&&h){t(l,"link",key,s)}}}S.apply(s,arguments);if(s._super.publics){for(key in s._super.publics){if(!l[key]){t(l,"link",key,s)}}}Object.defineProperty(l,"_hu_",{get:function p(){if(p.caller===e){return s}},set:function(e){}});Object.defineProperty(l,"_eu_",{get:function d(){if(d.caller===e){return f}},set:function(e){}})}};for(key in f){var T=f[key].accessLevel;switch(T){case"public":t(x,"public-static",key,{loc:r[T]});break;case"protected":t(x,"protected-static",key,{own:u,childs:a,loc:r[T]});break;case"private":t(x,"private-static",key,{own:u,loc:r[T]});break}}f=undefined;x.__extendProtectedStaticAccess=function(e){if(x.__extendProtectedStaticAccess.caller.caller===classing.Class){for(key in e){a[key]=true}}};if(o.parent!==n){o.parent.__extendProtectedStaticAccess(u)}Object.defineProperty(x,"xClass",{value:true,writable:false});Object.defineProperty(x,"isAbstract",{get:function(){return o.isAbstract},set:function(e){}});Object.defineProperty(x,"isFinal",{get:function(){return o.isFinal},set:function(e){}});Object.defineProperty(x,"timestamp",{value:i,writable:false});x._metadata=h;return x}()}}();classing.Class.options={parent:null,interfaces:null,isExtending:false,isImplementing:false,isAbstract:false,isFinal:false};classing.Class.Extends=function(e){if(!classing.Class.options.isImplementing&&!e!==undefined&&e.xClass){if(!e.isFinal){classing.Class.options.parent=e;classing.Class.options.isExtending=true;return classing.Class}else{throw classing.xError("301","Cannot extend a final class")}}else{if(classing.Class.options.isImplementing){throw classing.xError("302","Invalid Decleration")}throw classing.xError("307","attempting to extend a non Classing{js} Class or undefined")}};classing.Class.Implements=function(){var e=[];var t=arguments.length;if(t!==0){var n=0;while(n<t){e.push(arguments[n]);if(e[n]===undefined||!e[n].isInterface){throw classing.xError("306","attempting to implement a non-interface or undefined")}n++}classing.Class.options.isImplementing=true;classing.Class.options.interfaces=e;return classing.Class}else{throw classing.xError("302","Invalid Decleration")}};classing.Static=function(e){var t={value:e,isStatic:true};return t};Object.defineProperty(_global,"Static",{get:function(){return classing.Static},set:function(e){}});classing.Final=function(e){if(e.isAbstract){throw classing.xError("303","abstract methods cannot be final")}e.isFinal=true;return e};Object.defineProperty(_global,"Final",{value:function(e){return classing.Final(e)}});Object.defineProperty(classing.Final,"Class",{get:function(){classing.Class.options.isFinal=true;return classing.Class},set:function(e){}});classing.Abstract=function(e){if(e.isFinal){throw classing.xError("304","final methods cannot be abstract")}if(e._meta_){if(!e.isEmpty){throw classing.xError("305","An abstract method cannot have implementation")}e.isAbstract=true;return e}else if(!classing.Abstract.isNotImplemented(e)){throw classing.xError("305","An abstract method cannot have implementation")}e.isAbstract=true;e._meta_={argsCount:e.length};return e};Object.defineProperty(_global,"Abstract",{value:function(e){return classing.Abstract(e)}});classing.Abstract.isNotImplemented=function(e){var t=new RegExp(/function\s*\w*\([A-Za-z0-9,$_ ]*\)\s*\{\s*\}/);var n=e.toString();return t.test(n)};Object.defineProperty(classing.Abstract,"Class",{get:function(){classing.Class.options.isAbstract=true;return classing.Class},set:function(e){}})