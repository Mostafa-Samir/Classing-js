/** Classing{js} v1.0.0 | (c) 2014 Mostafa Samir | MIT License **/
function xStamp(e){if(typeof e==="function"){e.timestamp=Date.now()}}function xError(e,t){var n=new Error;n.name="xError";n.code=parseInt(e);n.message="[code="+n.code+"]:"+t;return n}function _xTypes(e,t){if(_xTypes.caller===types){this.count=e;this.list=t}else{throw xError("000","Not Allowed")}}function types(){var e=arguments.length;var t="";for(var n=0;n<e;n++){if(arguments[n]===xSelf){t+=xSelf.timestamp;continue}if(typeof arguments[n]!=="function"){throw xError("103","Invalid Type")}if(arguments[n].timestamp){t+=arguments[n].timestamp}else{var r=arguments[n].toString();var i=r.match(/function\s*(\w+)/)[1];t+=i}if(n!==arguments.length-1){t+=","}}var s=new _xTypes(e,t);return s}function Interface(e){var t={};for(key in e){var n=e[key];if(typeof n!=="function"){throw xError("401","Interfaces contain only methods")}else{if(n.isEmpty!==undefined){if(!n.isEmpty){throw xError("402","an interface method cannot have any implementation")}else{n._meta_.isOverloaded=true;t[key]={accessLevel:"public",description:n._meta_}}}else{if(!Abstract.isNotImplemented(n)){throw xError("402","an interface method cannot have any implementation")}else{t[key]={accessLevel:"public",description:{isOverloaded:false,argsCount:n.length}}}}}}var r=new Object;Object.defineProperty(r,"components",{value:t,writable:false});Object.defineProperty(r,"isInterface",{value:true,writable:false});return r}function xAreCompatiable(e,t,n){if(e.accessLevel===n){if(e.description.isOverloaded){if(t._meta_){if(e.description.isTyped===t._meta_.isTyped){if(e.description.isTyped){var r=e.description.types.length;var i=0;var s=t._meta_.types;var o=s.length;for(var u=0;u<o;u++){var a=-1;for(var f=0;f<r;f++){if(e.description.types[f]===s[u]){a=f;break}}if(a===-1){return false}else{i++}}if(i===r){return true}}else{var r=e.description.counts.length;var i=0;var l=t._meta_.counts;for(var u=0;u<l.length;u++){var a=-1;for(var f=0;f<r;f++){if(e.description.counts[f]===l[u]){a=f;break}}if(a===-1){return false}else{i++}}if(i===r){return true}}}}}else{if(e.description.argsCount===t.length){return true}}}return false}var _instantiateOnce=function(){var e=false;return function(){var t=Date.now();if(e){throw xError("000","not allowed")}else{e=true;Object.defineProperty(this,"timestamp",{get:function(){return t},set:function n(e){var r=n.caller;if(n.caller===Class){t=e}}})}}}();Object.defineProperty(window,"xTyped",{value:true,writable:false});Object.defineProperty(window,"xNonTyped",{value:false,writable:false});Object.defineProperty(window,"xSelf",{value:new _instantiateOnce,writable:false});var base=null;Function.create=function(){function e(e,t){if(e){for(i in t){for(j in t[i]){if(!Abstract.isNotImplemented(t[i][j])){return false}}}}else{for(i in t){if(!Abstract.isNotImplemented(t[i])){return false}}}return true}function t(e){var t=typeof e;if(t==="object"){if(e.constructor.timestamp){return e.constructor.timestamp.toString()}else{var n=Object.getPrototypeOf(e).constructor.toString();var r=n.match(/function\s*(\w*)/)[1];if(r!==""){return r}else{return"Object"}}}t=t[0].toUpperCase()+t.substring(1);return t}return function(n,r,i){if(n===undefined||!r||i){throw xError("100","invalid arguments")}else if(typeof n!=="boolean"||!(r instanceof Array)){throw xError("100","invalid arguments")}else{var s=r.length;var o={isTyped:false};var u;if(n){o.isTyped=true;o.types=[];var a=[];if(s===0||s%2!==0){throw xError("101","inavalid array format")}else{for(var f=0;f<s;f=f+2){var l,c;if(!(r[f]instanceof _xTypes)||typeof r[f+1]!=="function"){throw xError("101","inavalid array format")}else{if(r[f+1].length!==r[f].count){throw xError("102","arguments number mismatch")}r[f+1].types=r[f].list;a.push(r[f+1])}}a.sort(function(e,t){return t.length-e.length});var h=a[0].length;var p=new Array(h+1);for(var f=0;f<=h;f++){p[f]={}}for(var f=0;f<s/2;f++){var d=a[f];o.types.push(d.types);if(p[d.length][d.types]!==undefined){throw xError("106","duplicate arguments list found")}p[d.length][d.types]=d}u=function(){var e=h;var n=p;var r=[];var i=arguments.length;var s=0;while(s<i){r.push(arguments[s]);s++}var o="";for(var u=0;u<i;u++){o+=t(r[u]);if(u!==i-1){o+=","}}if(i>e){throw xError("105","no overloaded instance of the function matches the argument list")}var a=n[i][o];if(!a){throw xError("105","no overloaded instance of the function matches the argument list")}else{return a.apply(this,r)}};u._meta_=o;Object.defineProperty(u,"isEmpty",{get:function(){return e(true,p)},set:function(e){}})}}else{o.counts=new Array;if(s===0){throw xError("101","inavlid array format")}else{for(var f=0;f<s;f++){if(typeof r[f]!=="function"){throw xError("101","inavlid array format")}}r.sort(function(e,t){return t.length-e.length});var h=r[0].length;var p=[];for(var f=0;f<s;f++){var v=r[f].length;if(p[v]!==undefined){throw xError("106","duplicate arguments list found")}p[v]=r[f];o.counts.push(v)}u=function(){var e=h;var t=p;var n=[];var r=arguments.length;var i=0;while(i<r){n.push(arguments[i]);i++}if(r>e){throw xError("105","no overloaded instance of the function matches the argument list");return}var s=t[r];if(!s){throw xError("105","no overloaded instance of the function matches the argument list");return}else{return s.apply(this,n)}};u._meta_=o;Object.defineProperty(u,"isEmpty",{get:function(){return e(false,p)},set:function(e){}})}}return u}}}();var Class=function(){function e(e,t,n){if(e===0){if(t.hasOwnProperty("_hu_")){return t._hu_}else{return t}}else if(e===2){if(t.hasOwnProperty("_eu_")){return t._eu_}else{return t}}else{var r=new Object;t.apply(r,n);return r}}function t(t,n,r,i){if(n==="method"){t[r]=function(){var n=[];var s=arguments.length;var o=0;while(o<s){n.push(arguments[o]);if(n[o].constructor.timestamp===t.constructor.timestamp){n[o]=e(0,n[o])}o++}base=t._super;return i[r].apply(t,n);base=null}}else if(n==="property"){Object.defineProperty(t,r,{get:function(){base=t._super;return i[r].get.apply(t,[]);base=null},set:function(n){if(n.constructor.timestamp===t.constructor.timestamp){n=e(0,n)}base=t._super;return i[r].set.apply(t,[n]);base=null},enumerable:true})}else if(n==="protected-static"){if(typeof i.loc[r]==="object"&&i.loc[r].___xisProperty){Object.defineProperty(t,r,{get:function s(){var e=s.caller;if(i.own[e.privliagedMark]||i.childs[e.privliagedMark]||e.caller._meta_&&(i.own[e.caller.privliagedMark]||i.childs[e.caller.privliagedMark])){return i.loc[r].referTo[r]}else{throw xError("213","inaccessable member")}},set:function o(e){var t=o.caller;if(i.own[t.privliagedMark]||i.childs[t.privliagedMark]||t.caller._meta_&&(i.own[t.caller.privliagedMark]||i.childs[t.caller.privliagedMark])){i.loc[r].referTo[r]=e}else{throw xError("213","inaccessable member")}},enumerable:true})}else{Object.defineProperty(t,r,{get:function u(){var e=u.caller;if(i.own[e.privliagedMark]||i.childs[e.privliagedMark]||e.caller._meta_&&(i.own[e.caller.privliagedMark]||i.childs[e.caller.privliagedMark])){return i.loc[r].value}else{throw xError("213","inaccessable member")}},set:function a(e){var t=a.caller;if(i.own[t.privliagedMark]||i.childs[t.privliagedMark]||t.caller._meta_&&(i.own[t.caller.privliagedMark]||i.childs[t.caller.privliagedMark])){i.loc[r].value=e}else{throw xError("213","inaccessable member")}},enumerable:true})}}else if(n==="private-static"){if(typeof i.loc[r]==="object"&&i.loc[r].___xisProperty){Object.defineProperty(t,r,{get:function f(){var e=f.caller;if(i.own[e.privliagedMark]||e.caller._meta_&&i.own[e.caller.privliagedMark]!==-1){return i.loc[r].referTo[r]}else{throw xError("213","inaccessable member")}},set:function l(e){var t=l.caller;if(i.own[t.privliagedMark]||t.caller._meta_&&i.own[t.caller.privliagedMark]!==-1){i.loc[r].referTo[r]=e}else{throw xError("213","inaccessable member")}},enumerable:true})}else{Object.defineProperty(t,r,{get:function c(){var e=c.caller;if(i.own[e.privliagedMark]||e.caller._meta_&&i.own[e.caller.privliagedMark]!==-1){return i.loc[r].value}else{throw xError("213","inaccessable member")}},set:function h(e){var t=h.caller;if(i.own[t.privliagedMark]||t.caller._meta_&&i.own[t.caller.privliagedMark]!==-1){i.loc[r].value=e}else{throw xError("213","inaccessable member")}},enumerable:true})}}else if(n==="public-static"){if(typeof i.loc[r]==="object"&&i.loc[r].___xisProperty){Object.defineProperty(t,r,{get:function(){return i.loc[r].referTo[r]},set:function(e){i.loc[r].referTo[r]=e},enumerable:true})}else{t[r]=i.loc[r].value}}else if(n==="inherited"){Object.defineProperty(t,r,{get:function(){return t._super[r]},set:function(e){t._super[r]=e},enumerable:true})}else if(n==="link"){Object.defineProperty(t,r,{get:function(){return i[r]},set:function(e){i[r]=e},enumerable:true})}else if(n==="_eu_"){Object.defineProperty(t,r,{get:function(){return i[r]},set:function(e){i[r]=e},enumerable:true})}}var n={_metadata:{methods:{},proprties:{},attributes:{},abstracts:{}}};return function(r){var i=xSelf.timestamp;xSelf.timestamp=Date.now()+1;if(typeof r!=="object"){throw xError("201","Invalid Definition")}return function(){var s=0;var o={isAbstract:Class.options.isAbstract,isFinal:Class.options.isFinal,parent:Class.options.parent===null?n:Class.options.parent,interfaces:Class.options.interfaces,timestamp:i,hasProtectedStatics:false};Class.options.parent=null;Class.options.interfaces=null;Class.options.isExtending=false;Class.options.isImplementing=false;Class.options.isAbstract=false;Class.options.isFinal=false;var u={};var a={};var f={};var l={};var c={};var h={methods:{},proprties:{},attributes:{},abstracts:null};var p={};var d={};var v=function(){};if(o.interfaces!==null){var m=o.interfaces.length;for(var g=0;g<m;g++){var y=o.interfaces[g];for(record in y.components){c[record]=y.components[record]}}}o.interfaces=undefined;if(o.parent._metadata.abstracts){for(record in o.parent._metadata.abstracts){c[record]=o.parent._metadata.abstracts[record]}}for(modifier in r){if(typeof r[modifier]!=="object"){throw xError("201","Invalid definition")}if(modifier!=="public"&&modifier!=="private"&&modifier!=="protected"){throw xError("202",modifier+": undefined access modifier")}var b=r[modifier];for(key in b){if(d[key]){throw xError("207","class cannot have two components with the same name")}if(typeof b[key]==="function"){if(key==="Construct"){if(b[key].isAbstract){throw xError("214","a constructor cannot be abstract")}v=b[key];b[key].privliagedMark=i+":"+s;u[i+":"+s]=true;s++;continue}else if(o.parent._metadata.methods[key]){if(b[key].isAbstract){throw xError("215","an abstract method cannot override a concrete one")}if(o.parent._metadata.methods[key].accessLevel!==modifier){throw xError("216","overriding a method in a different access level is not allowed")}if(o.parent._metadata.methods[key].isFinal){throw xError("204","Cannot override a final method")}}else if(c[key]){if(xAreCompatiable(c[key],b[key],modifier)){c[key]=undefined}else{throw xError("205","on function "+key+": mismatch between implementation and abstract decleration")}}if(b[key].isAbstract){if(modifier==="private"){throw xError("203","marking a private method as abstract is not allowed")}l[key]={accessLevel:modifier,description:b[key]._meta_};b[key]=undefined}else{b[key].privliagedMark=i+":"+s;u[i+":"+s]=true;s++;d[key]=true;if(modifier!=="private"){h.methods[key]={isFinal:b[key].isFinal,accessLevel:modifier}}}}else if(typeof b[key]==="object"){if(b[key]!==null&&b[key].isStatic){if(typeof b[key].value==="function"){b[key].value.privliagedMark=i+":"+s;u[i+":"+s]=true;s++}else if(typeof b[key].value==="object"){var w=2;for(prop in b[key].value){if((prop==="get"||prop=="set")&&typeof b[key].value[prop]==="function"){w--}else{break}}if(w===0){b[key].value.get.privliagedMark=i+":"+s;u[i+":"+s]=true;s++;b[key].value.set.privliagedMark=i+":"+s;u[i+":"+s]=true;s++;Object.defineProperty(p,key,{get:b[key].value.get,set:b[key].value.set});b[key]={___xisProperty:true,isStatic:true,referTo:p}}}f[key]={accessLevel:modifier};d[key]=true}else{if(b[key]!==null){var E=2;for(prop in b[key]){if((prop==="get"||prop=="set")&&typeof b[key][prop]==="function"){E--}else{break}}if(E===0){b[key].get.privliagedMark=i+":"+s;u[i+":"+s]=true;s++;b[key].set.privliagedMark=i+":"+s;u[i+":"+s]=true;s++;b[key].isProperty=true;d[key]=true;if(modifier!=="private"){h.proprties[key]={accessLevel:modifier}}}else{throw xError("206","setting a non-static attribute to an object is not allowed")}}else{d[key]=true;if(modifier!=="private"){h.proprties[key]={accessLevel:modifier}}}}}else{d[key]=true;if(modifier!=="private"){h.proprties[key]={accessLevel:modifier}}}}}for(record in c){if(c[record]!==undefined){l[record]=c[record]}}h.abstracts=l;var m=Object.keys(l).length;if(m==0&&o.isAbstract){throw xError("208","an abstrcat class must contain at least one abstract method")}if(m>0&&!o.isAbstract){throw xError("209","an abstract method must be contained in an abstract class")}c=undefined;d=undefined;var S=function(){var r=this;var i=[];var s=arguments.length;var u=0;while(u<s){i.push(arguments[u]);if(i[u].constructor.timestamp===o.timestamp){i[u]=e(0,i[u])}u++}base=function(){if(o.parent!==n){if(o.parent.isAbstract){r._super=e(1,o.parent,arguments)}else{r._super={};o.parent.apply(r._super,arguments)}}else{r._super=new Object}};v.apply(r,i);if(r._super===null){if(o.parent===n){r._super=new Object}else{try{if(o.parent.isAbstract){r._super=e(1,o.parent,[])}else{r._super=new o.parent}}catch(a){throw xError("210","parent class doesn't contain a default constructor")}}}r._super=e(2,r._super);for(key in r._super){if(!r[key]){t(r,"inherited",key)}}};var x=function(){if(o.isAbstract&&x.caller!==e){throw xError("211","Cannot instantiate an abstract class")}else{var n={};var i={};i["publics"]={};var s=this;n["_super"]=null;n.constructor=x;for(modifier in r){var u=r[modifier];for(key in u){var a=false;if(u[key]!==null){if(u[key]!==undefined&&!u[key].isStatic&&key!="Construct"){a=true;if(typeof u[key]==="function"){t(n,"method",key,r[modifier])}else if(u[key].isProperty){t(n,"property",key,r[modifier])}else{n[key]=r[modifier][key]}}if(modifier==="public"||modifier==="protected"){t(i,"_eu_",key,n);if(modifier==="public"){i.publics[key]=true}}}else{a=true;n[key]=null;if(modifier==="public"||modifier==="protected"){t(i,"_eu_",key,n);if(modifier==="public"){i.publics[key]=true}}}if(modifier==="public"&&a){t(s,"link",key,n)}}}S.apply(n,arguments);if(n._super.publics){for(key in n._super.publics){if(!s[key]){t(s,"link",key,n)}}}Object.defineProperty(s,"_hu_",{get:function f(){if(f.caller===e){return n}},set:function(e){}});Object.defineProperty(s,"_eu_",{get:function l(){if(l.caller===e){return i}},set:function(e){}})}};for(key in f){var T=f[key].accessLevel;switch(T){case"public":t(x,"public-static",key,{loc:r[T]});break;case"protected":t(x,"protected-static",key,{own:u,child:a,loc:r[T]});break;case"private":t(x,"private-static",key,{own:u,loc:r[T]});break}}f=undefined;x.__extendProtectedStaticAccess=function(e){if(x.__extendProtectedStaticAccess.caller.caller===Class){for(key in e){a[key]=true}}};if(o.parent!==n){o.parent.__extendProtectedStaticAccess(u)}Object.defineProperty(x,"xClass",{value:true,writable:false});Object.defineProperty(x,"isAbstract",{get:function(){return o.isAbstract},set:function(e){}});Object.defineProperty(x,"isFinal",{get:function(){return o.isFinal},set:function(e){}});Object.defineProperty(x,"timestamp",{value:i,writable:false});x._metadata=h;return x}()}}();Class.options={parent:null,interfaces:null,isExtending:false,isImplementing:false,isAbstract:false,isFinal:false};Class.Extends=function(e){if(!Class.options.isImplementing&&!e!==undefined&&e.xClass){if(!e.isFinal){Class.options.parent=e;Class.options.isExtending=true;return Class}else{throw xError("301","Cannot extend a final class")}}else{if(Class.options.isImplementing){throw xError("302","Invalid Decleration")}throw xError("307","attempting to extend a non Classing{js} Class or undefined")}};Class.Implements=function(){var e=[];var t=arguments.length;if(t!==0){var n=0;while(n<t){e.push(arguments[n]);if(e[n]===undefined||!e[n].isInterface){throw xError("306","attempting to implement a non-interface or undefined")}n++}Class.options.isImplementing=true;Class.options.interfaces=e;return Class}else{throw xError("302","Invalid Decleration")}};var Static=function(e){var t={value:e,isStatic:true};return t};var Final=function(e){if(e.isAbstract){throw xError("303","abstract methods cannot be final")}e.isFinal=true;return e};Object.defineProperty(Final,"Class",{get:function(){window["Class"].options.isFinal=true;return window["Class"]},set:function(e){}});var Abstract=function(e){if(e.isFinal){throw xError("304","final methods cannot be abstract")}if(e._meta_){if(!e.isEmpty){throw xError("305","An abstract method cannot have implementation")}e.isAbstract=true;return e}else if(!Abstract.isNotImplemented(e)){throw xError("305","An abstract method cannot have implementation")}e.isAbstract=true;e._meta_={argsCount:e.length};return e};Abstract.isNotImplemented=function(e){var t=new RegExp(/function\s*\w*\([A-Za-z0-9,$_ ]*\)\s*\{\s*\}/);var n=e.toString();return t.test(n)};Object.defineProperty(Abstract,"Class",{get:function(){window["Class"].options.isAbstract=true;return window["Class"]},set:function(e){}})